<!DOCTYPE html>
<html>
<head>
    <title>Workflow Details</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/workflows.css') }}">
</head>
<body>
    <div class="container">
        <nav class="navbar">
            <a href="{{ url_for('workflows') }}" class="nav-link">‚Üê Back to Workflows</a>
            <div class="user-info">
                Welcome, {{ user.username }} | 
                <a href="{{ url_for('logout') }}" class="nav-link">Logout</a>
            </div>
        </nav>

        <div class="workflow-detail">
            <div class="workflow-header">
                <h1>{{ workflow.name }}</h1>
                <span class="status status-{{ workflow.status.lower() }}">{{ workflow.status }}</span>
            </div>

            <div class="workflow-info">
                <div class="info-section">
                    <h3>Workflow Information</h3>
                    <p><strong>Created:</strong> {{ workflow.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</p>
                    {% if workflow.completed_at %}
                    <p><strong>Completed:</strong> {{ workflow.completed_at.strftime('%Y-%m-%d %H:%M:%S') }}</p>
                    {% endif %}
                    <p><strong>Status:</strong> {{ workflow.status }}</p>
                </div>

                <div class="tasks-section">
                    <h3>Tasks</h3>
                    <div class="tasks-timeline">
                        {% for task_type, task_id in workflow.task_types|zip(workflow.task_ids) %}
                        <div class="task-item">
                            <div class="task-header">
                                <h4>{{ task_type }}</h4>
                                <span class="task-id">ID: {{ task_id }}</span>
                            </div>
                            
                            {% if workflow.task_results and workflow.task_results[task_id] %}
                            <div class="task-result">
                                <h5>Result:</h5>
                                <pre>{{ workflow.task_results[task_id]|tojson(indent=2) }}</pre>
                            </div>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 